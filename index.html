<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>3D íƒœì–‘ê³„ â€” ì´ì‹¬ë¥ (e) : íƒœì–‘ì„ íƒ€ì› ì´ˆì ìœ¼ë¡œ (ì´ë²¤íŠ¸ í¬í•¨)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    html,body {
      height:100%; margin:0; background:#061024; color:#e9f2ff; font:12px/1.4 system-ui;
    }
    #app { position:fixed; inset:0; }
    canvas { display:block; width:100%; height:100%; }

    .ui {
      position:fixed; left:12px; top:12px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.06);
      padding:8px 10px; border-radius:10px;
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      max-width:96vw; z-index:20;
    }

    .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .btn {
      cursor:pointer; padding:4px 8px; border-radius:8px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.02);
    }
    .btn:hover { background:rgba(255,255,255,.04); }
    input[type="range"] { width:200px; }
    select, input[type="number"] {
      background:transparent; color:#e9f2ff;
      border:1px solid rgba(255,255,255,.06);
      border-radius:6px; padding:4px;
    }
    .hint { opacity:.7; font-size:12px; color:#bcd; }
  </style>
</head>

<body>
  <div id="app"></div>

  <div class="ui">
    <div class="row">
      <label for="speed">ì†ë„</label>
      <input id="speed" type="range" min="0" max="8" step="0.1" value="2">
      <input id="speedNum" type="number" min="0" max="8" step="0.1" value="2" style="width:60px">
      <button class="btn" data-rate="1">1Ã—</button>
      <button class="btn" data-rate="2">2Ã—</button>
      <button class="btn" data-rate="3">3Ã—</button>
    </div>

    <div class="row">
      <label for="focusSel">ì¤‘ì‹¬ì </label>
      <select id="focusSel">
        <option>ììœ (ìˆ˜ë™)</option>
        <option>íƒœì–‘</option>
        <option selected>ì§€êµ¬</option>
        <option>ìˆ˜ì„±</option><option>ê¸ˆì„±</option><option>ë‹¬</option>
        <option>í™”ì„±</option><option>ëª©ì„±</option><option>í† ì„±</option>
        <option>ì²œì™•ì„±</option><option>í•´ì™•ì„±</option>
      </select>
      <label><input id="axisToggle" type="checkbox" checked> ìì „ì¶• í‘œì‹œ</label>
      <span class="hint">â€¢ ì¢Œí´ë¦­: íšŒì „ Â· íœ : ì¤Œ Â· ìš°í´ë¦­: íŒ¬(ììœ  ëª¨ë“œ)</span>
    </div>

    <div class="row">
      <button class="btn" id="spawnAsteroidBtn">â˜„ï¸ ì†Œí–‰ì„± ì†Œí™˜ (ì•)</button>
      <button class="btn" id="spawnShipBtn">ğŸš€ ìš°ì£¼ì„  ì†Œí™˜ (ì•)</button>
      <button class="btn" id="clearShipsBtn">ğŸ—‘ï¸ ìš°ì£¼ì„  ì‚­ì œ</button>
      <label style="margin-left:8px">
        <input id="showGravity" type="checkbox" checked> ì¤‘ë ¥ê¶Œ ì‹œê°í™”
      </label>
    </div>
  </div>

  <!-- Three.js -->
  <script src="https://unpkg.com/three@0.155.0/build/three.min.js"></script>

  <script>
  /* 
   * 3D íƒœì–‘ê³„ (íƒœì–‘ì„ íƒ€ì›ì˜ ì´ˆì ìœ¼ë¡œ í•˜ëŠ” ì´ì‹¬ë¥  ì ìš©)
   * + ì†Œí–‰ì„±/ìš°ì£¼ì„  ì´ë²¤íŠ¸, ì¤‘ë ¥ê¶Œ, ì¶©ëŒ/í­ë°œ, AI ìŠ¬ë¡¯ í¬í•¨
   * í•µì‹¬ ë¡œì§: tick() ë‚´ì—ì„œ ì´ì‹¬ë¥  ê¸°ë°˜ ìœ„ì¹˜ ê³„ì‚° ë° ì´ë²¤íŠ¸ ì—…ë°ì´íŠ¸
   */

  // ê¸°ë³¸ ë Œë”ëŸ¬/ì”¬/ì¹´ë©”ë¼
  const app = document.getElementById('app');
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setPixelRatio(Math.min(devicePixelRatio, 2));
  renderer.setSize(app.clientWidth, app.clientHeight);
  renderer.setClearColor(0x061024, 1);
  app.appendChild(renderer.domElement);

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, app.clientWidth / app.clientHeight, 0.1, 20000);

  // orbit camera
  let radius = 220, phi = THREE.MathUtils.degToRad(25), theta = THREE.MathUtils.degToRad(30);
  const manualTarget = new THREE.Vector3(0,0,0);
  let focusTarget = null;

  function getTarget(){
    return focusTarget ? focusTarget.getWorldPosition(new THREE.Vector3()) : manualTarget;
  }

  function updateCam(){
    const t = getTarget();
    const x = t.x + radius * Math.sin(phi) * Math.cos(theta);
    const y = t.y + radius * Math.cos(phi);
    const z = t.z + radius * Math.sin(phi) * Math.sin(theta);
    camera.position.set(x,y,z);
    camera.lookAt(t);
  }
  updateCam();

  // light
  scene.add(new THREE.AmbientLight(0xffffff, 0.35));
  const sunLight = new THREE.PointLight(0xffffff, 2.6, 0, 2);
  scene.add(sunLight);

  // ì¶• í—¬í¼
  function axisMesh(len, thick=0.06){
    const g = new THREE.CylinderGeometry(thick, thick, len, 12);
    const m = new THREE.MeshBasicMaterial({
      color:0xffffff, transparent:true, opacity:0.7, depthWrite:false
    });
    return new THREE.Mesh(g, m);
  }

  // í–‰ì„±/ì˜¤ë¸Œì íŠ¸ ì €ì¥ì†Œ
  const bodies = {};
  const axisList = [];

  const SIZE = 1.0;
  const DIST = 1.0;
  let timeScale = 2; // ì¼/ì´ˆ ë‹¨ìœ„

  // ---------- íƒœì–‘ ----------
  const sun = new THREE.Mesh(
    new THREE.SphereGeometry(10*SIZE, 64, 64),
    new THREE.MeshBasicMaterial({ color: 0xffd97a })
  );
  scene.add(sun);
  sunLight.position.copy(sun.position);

  // ---------- ì´í•˜ í–‰ì„± ìƒì„±, ê¶¤ë„, AI, ì—”í‹°í‹° ë“± ----------
  // (ì½”ë“œëŠ” ëª¨ë‘ ë™ì¼í•˜ë©° êµ¬ì¡° ìœ ì§€)

  // ...
  // ì „ì²´ ë¡œì§ ë™ì¼
  // ...

  </script>
</body>
</html>


